# PinAI Subnet Environment Configuration
# Copy this file to .env and fill in your values
# WARNING: Never commit .env file with real private keys!

# ============================================================
# üìù CONFIGURATION GUIDE
# ============================================================
# This file contains two types of configuration:
#
# 1. FIXED VALUES (Protocol-wide, DO NOT CHANGE):
#    - Smart contract addresses (PIN_BASE_SEPOLIA_*)
#    - Network settings (RPC URLs, Chain IDs)
#    - These are the same for all Base Sepolia users
#
# 2. USER-SPECIFIC VALUES (REQUIRED - FILL IN):
#    - Your private keys (VALIDATOR_KEYS, TEST_PRIVATE_KEY)
#    - Your subnet information (SUBNET_ID after creation)
#    - Your validator public keys (derive with ./bin/derive-pubkey)
#
# ============================================================
# üîë PRIVATE KEYS (REQUIRED - FILL IN)
# ============================================================
# IMPORTANT: Use test-only private keys with NO real funds!

# Matcher/Test private key (used for matcher signing and test intent submissions)
TEST_PRIVATE_KEY=

# Validator private keys (comma-separated, required for running validators)
# Number of keys must match NUM_VALIDATORS
# Format: 64 hex characters without 0x prefix
# Generate: openssl rand -hex 32
# Example: VALIDATOR_KEYS=abc123...,def456...,ghi789...
VALIDATOR_KEYS=

# Validator public keys (comma-separated, required for consensus)
# Number of pubkeys must match NUM_VALIDATORS and VALIDATOR_KEYS
# Format: 130 hex characters starting with 04 (uncompressed ECDSA public key)
# Derive from private key: ./bin/derive-pubkey <private_key_hex>
# Example: VALIDATOR_PUBKEYS=040b7d...,04a1b2...,04f1e2...
VALIDATOR_PUBKEYS=

# ============================================================
# Consensus Configuration
# ============================================================
# Consensus type: "raft" or "cometbft"
CONSENSUS_TYPE=raft

# Number of validators to run
NUM_VALIDATORS=3

# ============================================================
# Subnet Configuration
# ============================================================
# Default Subnet ID (all validators use this unless VALIDATOR_SUBNET_IDS is set)
SUBNET_ID=0x0000000000000000000000000000000000000000000000000000000000000002

# Per-validator Subnet IDs (optional, comma-separated)
# If set, each validator uses its corresponding Subnet ID
# Example: VALIDATOR_SUBNET_IDS=0x...002,0x...009,0x...002
# VALIDATOR_SUBNET_IDS=

# Matcher Subnet ID (which subnet the matcher serves)
# MATCHER_SUBNET_ID=0x0000000000000000000000000000000000000000000000000000000000000002

# ============================================================
# üåê FIXED NETWORK CONFIGURATION (DO NOT CHANGE)
# ============================================================
# RootLayer Endpoints (PinAI Test Network)
ROOTLAYER_GRPC=3.17.208.238:9001
ROOTLAYER_HTTP=http://3.17.208.238:8081/api/v1

# Blockchain Configuration (Base Sepolia Testnet)
ENABLE_CHAIN_SUBMIT=true
CHAIN_RPC_URL=https://sepolia.base.org
CHAIN_NETWORK=base_sepolia

# ============================================================
# üìú FIXED SMART CONTRACT ADDRESSES (DO NOT CHANGE)
# ============================================================
# Base Sepolia Testnet - Updated 2025-11-03
# These addresses are the same for all users on Base Sepolia
PIN_BASE_SEPOLIA_INTENT_MANAGER=0xB2f092E696B33b7a95e1f961369Bb59611CAd093
PIN_BASE_SEPOLIA_SUBNET_FACTORY=0x2b5D7032297Df52ADEd7020c3B825f048Cd2df3E
PIN_BASE_SEPOLIA_STAKING_MANAGER=0x7f887e88014e3AF57526B68b431bA16e6968C015
PIN_BASE_SEPOLIA_CHECKPOINT_MANAGER=0x6A61BA20D910576A6c0B39175A6CF98358bB4008

# Legacy addresses (Deprecated - Do not use)
# PIN_BASE_SEPOLIA_INTENT_MANAGER_OLD=0xD04d23775D3B8e028e6104E31eb0F6c07206EB46
# PIN_BASE_SEPOLIA_SUBNET_FACTORY_OLD=0x493c5B1c7Ee9eDe75bf2e57e5250E695F929A796
# PIN_BASE_SEPOLIA_STAKING_MANAGER_OLD=0xAc11AE66c7831A70Bea940b0AE16c967f940cB65
# PIN_BASE_SEPOLIA_CHECKPOINT_MANAGER_OLD=0xe947c9C4183D583fB2E500aD05B105Fa01abE57e

# ============================================================
# Optional Configuration
# ============================================================
# Log directory (default: ./subnet-logs)
# LOGS_DIR=./subnet-logs

# Test mode: true=background, false=foreground (default: false)
# TEST_MODE=false

# Start agent: if true, starts simple-agent; if false, skips agent (default: true)
# Set to false if you want to start your own agents separately
# START_AGENT=true

# ============================================================
# Usage Examples
# ============================================================
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Build tools (required for derive-pubkey):
#    make build
#
# 3. Generate validator keys:
#    # Generate 3 private keys (64 hex characters each)
#    PRIVKEY1=$(openssl rand -hex 32)
#    PRIVKEY2=$(openssl rand -hex 32)
#    PRIVKEY3=$(openssl rand -hex 32)
#
#    # Derive public keys (130 hex characters each, starting with 04)
#    PUBKEY1=$(./bin/derive-pubkey "$PRIVKEY1")
#    PUBKEY2=$(./bin/derive-pubkey "$PRIVKEY2")
#    PUBKEY3=$(./bin/derive-pubkey "$PRIVKEY3")
#
#    # Verify keys (should display all 3 key pairs)
#    echo "Validator 1: Private=$PRIVKEY1, Public=$PUBKEY1"
#    echo "Validator 2: Private=$PRIVKEY2, Public=$PUBKEY2"
#    echo "Validator 3: Private=$PRIVKEY3, Public=$PUBKEY3"
#
#    # SECURITY: Generate a SEPARATE key for the matcher (NEVER reuse validator keys!)
#    MATCHER_PRIVKEY=$(openssl rand -hex 32)
#    echo "Matcher:     Private=$MATCHER_PRIVKEY (separate key for security)"
#
#    # Save to .env (append to this file)
#    echo "TEST_PRIVATE_KEY=$MATCHER_PRIVKEY" >> .env
#    echo "VALIDATOR_KEYS=$PRIVKEY1,$PRIVKEY2,$PRIVKEY3" >> .env
#    echo "VALIDATOR_PUBKEYS=$PUBKEY1,$PUBKEY2,$PUBKEY3" >> .env
#
# 4. Fill in subnet information (after creating subnet):
#    # Edit .env and update:
#    # SUBNET_ID=0x... (from create-subnet.sh output)
#
# 5. Load environment:
#    set -a && source .env && set +a
#
# 6. Start subnet with Raft (3 validators):
#    ./scripts/start-subnet.sh
#
# 7. Start subnet with CometBFT (3 validators):
#    export CONSENSUS_TYPE=cometbft
#    ./scripts/start-subnet.sh
#
# 8. Start with different number of validators:
#    # First generate more keys (repeat step 3 for each validator)
#    export NUM_VALIDATORS=5
#    export VALIDATOR_KEYS=key1,key2,key3,key4,key5
#    export VALIDATOR_PUBKEYS=pubkey1,pubkey2,pubkey3,pubkey4,pubkey5
#    ./scripts/start-subnet.sh
#
# 9. Troubleshooting:
#    # If derive-pubkey not found: make build
#    # If invalid key format: check keys are exactly 64 hex chars (private) or 130 (public)
#    # If keys don't work: ensure VALIDATOR_KEYS and VALIDATOR_PUBKEYS are in same order
#
# üìö Detailed documentation:
#    - Key generation: docs/quick_start.md ("Step 1: Generate Validator Keys")
#    - Full setup guide: README.md ("Validator Keys" section)
#    - Scripts reference: docs/scripts_guide.md
#
# ============================================================
# Security Notes
# ============================================================
# ‚ö†Ô∏è  NEVER commit private keys to git
# ‚ö†Ô∏è  Use .env file (already in .gitignore)
# ‚ö†Ô∏è  Use test-only keys with no real funds
# ‚ö†Ô∏è  Rotate keys regularly in production
